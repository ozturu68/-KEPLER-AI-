# ==============================================================================
# KEPLER EXOPLANET ML PROJECT: AUTONOMOUS QUALITY GATE v4.1.0
# ==============================================================================
#
# Version: 4.1.0
# Updated: 2025-11-11 22:24:03 UTC
# Author: sulegogh
# Status: AUTONOMOUS âœ…
#
# ==============================================================================

default_language_version:
  python: python3.10

default_stages: [commit]

fail_fast: false

minimum_pre_commit_version: '2.20.0'

exclude: |
  (?x)^(
      .*\.egg-info/.*|.*/__pycache__/.*|.*\.py[cod]$|
      \.git/.*|\.tox/.*|\.pytest_cache/.*|\.coverage$|htmlcov/.*|
      \.mypy_cache/.*|\.hypothesis/.*|
      venv/.*|env/.*|\.venv/.*|virtualenv/.*|
      data/raw/.*|data/processed/.*|data/engineered/.*|data/scaled/.*|data/selected/.*|
      models/.*\.(pkl|joblib|cbm|h5|pth|onnx)$|
      logs/.*|tmp/.*|temp/.*|catboost_info/.*|
      \.ipynb_checkpoints/.*|
      build/.*|dist/.*|\.eggs/.*|
      \.vscode/.*|\.idea/.*|\.DS_Store$|
      docs/_build/.*|site/.*
  )$

ci:
  autofix_commit_msg: '[pre-commit.ci] auto fixes'
  autofix_prs: true
  autoupdate_schedule: weekly
  skip: [mypy, pydocstyle]
  submodules: false

repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
        name: "âœ‚ï¸  Trim Trailing Whitespace"
        args: [--markdown-linebreak-ext=md]
        types: [text]

      - id: end-of-file-fixer
        name: "ðŸ“„ Fix End-of-File Newlines"
        types: [text]

      - id: mixed-line-ending
        name: "ðŸ”„ Fix Line Endings (LF)"
        args: [--fix=lf]
        types: [text]

      - id: check-merge-conflict
        name: "ðŸ”€ Check Merge Conflicts"
        types: [text]

      - id: check-case-conflict
        name: "ðŸ”¤ Check Case Conflicts"
        types: [text]

      - id: check-yaml
        name: "âœ… Validate YAML"
        types: [yaml]
        exclude: ^\.pre-commit-config\.yaml$

      - id: check-json
        name: "âœ… Validate JSON"
        types: [json]
        exclude: |
          (?x)^(
              notebooks/02_feature_engineering_research\.ipynb|
              notebooks/03_model_experiments\.ipynb|
              models/registry/.*\.json
          )$

      - id: check-toml
        name: "âœ… Validate TOML"
        types: [toml]

      - id: check-ast
        name: "ðŸ Validate Python AST"
        types: [python]

      - id: check-added-large-files
        name: "ðŸ“¦ Prevent Large Files (>10MB)"
        args: ['--maxkb=10000']
        exclude: |
          (?x)^(
              data/.*\.(csv|parquet|feather)$|
              models/.*\.(pkl|joblib|cbm|h5|pth|onnx)$|
              \.git/lfs/.*
          )$

      - id: detect-private-key
        name: "ðŸ”’ Detect Private Keys"
        types: [text]

      - id: debug-statements
        name: "ðŸ› Detect Debug Statements"
        types: [python]

      - id: check-builtin-literals
        name: "ðŸ” Check Builtin Literals"
        types: [python]

      - id: check-executables-have-shebangs
        name: "ðŸ“œ Check Executable Shebangs"
        types: [text, executable]

      - id: check-shebang-scripts-are-executable
        name: "ðŸ”§ Check Shebang Executables"
        types: [text]

      - id: check-symlinks
        name: "ðŸ”— Check Symlinks"
        types: [symlink]

      - id: destroyed-symlinks
        name: "ðŸ’” Check Destroyed Symlinks"
        types: [file]

  - repo: https://github.com/psf/black
    rev: 23.12.1
    hooks:
      - id: black
        name: "ðŸŽ¨ Format Code (Black)"
        language_version: python3.10
        types: [python]
        args:
          - --line-length=120
          - --target-version=py310
          - --skip-string-normalization

  - repo: https://github.com/pycqa/isort
    rev: 5.13.2
    hooks:
      - id: isort
        name: "ðŸ“š Sort Imports (isort)"
        types: [python]
        args:
          - --profile=black
          - --line-length=120
          - --multi-line=3
          - --trailing-comma
          - --force-grid-wrap=0
          - --use-parentheses
          - --ensure-newline-before-comments
          - --skip-gitignore

  - repo: https://github.com/asottile/pyupgrade
    rev: v3.15.0
    hooks:
      - id: pyupgrade
        name: "â¬†ï¸  Upgrade Syntax (Python 3.10+)"
        types: [python]
        args:
          - --py310-plus
          - --keep-runtime-typing

  - repo: https://github.com/pycqa/flake8
    rev: 7.0.0
    hooks:
      - id: flake8
        name: "ðŸ” Lint Code (Flake8 - Autonomous)"
        types: [python]
        args:
          - --max-line-length=120
          - --max-complexity=30
          - --extend-ignore=D,E203,E402,E501,W503,W504,F401,F403,F541,F821,F841,B007,B904,B905,B907,B950,C901
          - --per-file-ignores=__init__.py:F401 F403,test_*.py:F401 F841,conftest.py:F401,setup.py:F401

        additional_dependencies:
          - flake8-bugbear>=23.12.2
          - flake8-comprehensions>=3.14.0
          - flake8-simplify>=0.21.0
          - pep8-naming>=0.13.3

        exclude: |
          (?x)^(
              tests/.*|
              setup\.py|
              docs/conf\.py|
              migrations/.*
          )$

  - repo: https://github.com/nbQA-dev/nbQA
    rev: 1.7.1
    hooks:
      - id: nbqa-black
        name: "ðŸ““ Format Notebooks (Black)"
        types: [jupyter]
        args: [--line-length=120]
        exclude: |
          (?x)^(
              notebooks/02_feature_engineering_research\.ipynb|
              notebooks/03_model_experiments\.ipynb
          )$

      - id: nbqa-isort
        name: "ðŸ““ Sort Notebook Imports"
        types: [jupyter]
        args: [--profile=black, --line-length=120]
        exclude: |
          (?x)^(
              notebooks/02_feature_engineering_research\.ipynb|
              notebooks/03_model_experiments\.ipynb
          )$

      - id: nbqa-flake8
        name: "ðŸ““ Lint Notebooks (Autonomous)"
        types: [jupyter]
        args:
          - --max-line-length=120
          - --max-complexity=30
          - --extend-ignore=D,E203,E402,E501,W503,W504,F401,F403,F541,F821,F841,B,C901

        exclude: |
          (?x)^(
              notebooks/02_feature_engineering_research\.ipynb|
              notebooks/03_model_experiments\.ipynb
          )$

  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v3.1.0
    hooks:
      - id: prettier
        name: "ðŸ’… Format Docs (Prettier)"
        types_or: [yaml, json, markdown]
        args:
          - --prose-wrap=always
          - --print-width=120
          - --tab-width=2
          - --single-quote=false
        exclude: |
          (?x)^(
              \.pre-commit-config\.yaml|
              data/.*|
              models/registry/.*\.json|
              poetry\.lock|
              package-lock\.json
          )$

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.8.0
    hooks:
      - id: mypy
        name: "ðŸ”¬ Type Check (MyPy - Optional)"
        types: [python]
        stages: [manual]
        args:
          - --ignore-missing-imports
          - --no-strict-optional
          - --allow-untyped-defs
          - --allow-incomplete-defs
          - --allow-untyped-calls
          - --no-warn-return-any
          - --no-warn-unused-ignores
          - --show-error-codes
          - --pretty
        additional_dependencies:
          - types-requests>=2.31.0
          - types-PyYAML>=6.0.12
          - types-python-dateutil>=2.8.19
          - pandas-stubs>=2.1.1
          - numpy>=1.24.0
        exclude: |
          (?x)^(
              tests/.*|
              notebooks/.*|
              setup\.py|
              migrations/.*
          )$

  - repo: https://github.com/pycqa/pydocstyle
    rev: 6.3.0
    hooks:
      - id: pydocstyle
        name: "ðŸ“– Check Docstrings (Optional)"
        types: [python]
        stages: [manual]
        args:
          - --convention=google
          - --add-ignore=D100,D101,D102,D103,D104,D105,D106,D107
          - --add-ignore=D200,D202,D203,D204,D205,D208,D209,D210,D211,D212,D213,D214,D215
          - --add-ignore=D300,D301,D302
          - --add-ignore=D400,D401,D402,D403,D404,D405,D406,D407,D408,D409,D410,D411,D412,D413,D414,D415,D416,D417
        exclude: |
          (?x)^(
              tests/.*|
              setup\.py|
              docs/conf\.py|
              migrations/.*
          )$
